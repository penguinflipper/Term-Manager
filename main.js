/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => TermManager
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  mySetting: "default",
  term_colour: "#FFFFFF",
  term_bold: true,
  term_italics: false,
  defn_colour: "#FFFFFF",
  defn_bold: false,
  defn_italics: false
};
var TermManager = class extends import_obsidian.Plugin {
  constructor() {
    super(...arguments);
    this.termDict = {};
    this.defaultHeadings = "# A\n---\n# B\n---\n# C\n---\n# D\n---\n# E\n---\n# F\n---\n# G\n---\n# H\n---\n# I\n---\n# J\n---\n# K\n---\n# L\n---\n# M\n---\n# N\n---\n# O\n---\n# P\n---\n# Q\n---\n# R\n---\n# S\n---\n# T\n---\n# U\n---\n# V\n---\n# W\n---\n# X\n---\n# Y\n---\n# Z\n---\n";
    this.termRegex = />[a-zA-Z][a-zA-Z0-9 ]*</;
  }
  async onload() {
    await this.loadSettings();
    this.app.workspace.onLayoutReady(() => {
      this.getAllTerms();
      this.makeNewFile();
    });
    this.addCommand({
      id: "define-term",
      name: "Define Term",
      editorCallback: (editor, view) => {
        if (editor.getSelection().match(/^[a-zA-Z][a-zA-Z0-9 ]*$/)) {
          new DefinitionPopup(this.app, this.settings, editor.getSelection(), (formatting) => {
            this.defineTerm(editor, formatting);
          }).open();
        } else {
          if (!editor.getSelection().charAt(0).match(/^[a-zA-Z]/)) {
            new import_obsidian.Notice("Term must start with an alphabetical character!");
          } else {
            new import_obsidian.Notice("Term can only contain alphanumeric characters!");
          }
        }
      }
    });
    this.addCommand({
      id: "clear-term-definition",
      name: "Clear Term Definition",
      editorCallback: (editor, view) => {
        if (editor.getSelection().match(/^\[\[Definitions#\^[a-zA-Z0-9]+|[a-zA-Z0-9]+\]\]/)) {
          const m = editor.getSelection().match(/\|[a-zA-Z0-9]+/);
          if (m) {
            const termToclear = m[0].substring(1);
            this.removeDefinedTerm(editor, termToclear);
            delete this.termDict[termToclear];
            editor.replaceSelection(termToclear);
            new import_obsidian.Notice("Cleared definition!");
          }
        }
      }
    });
    this.addSettingTab(new TMSettingTab(this.app, this));
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  async makeNewFile() {
    this.defsNote = this.app.vault.getFileByPath("Definitions.md");
    if (!this.defsNote) {
      this.defsNote = await this.app.vault.create("Definitions.md", this.defaultHeadings);
    }
    if (this.defsNote) {
      let defsContent = await this.app.vault.read(this.defsNote);
      if (defsContent == "") {
        this.app.vault.modify(this.defsNote, this.defaultHeadings);
        defsContent = await this.app.vault.read(this.defsNote);
      }
    }
  }
  async getAllTerms() {
    this.makeNewFile();
    if (this.defsNote) {
      let defsContent = await this.app.vault.read(this.defsNote);
      let contentList = defsContent.split("\n");
      let currentTerm = "";
      contentList.forEach((s) => {
        let matches = s.match(this.termRegex);
        let temp = "";
        if (matches) {
          temp = matches[0].substring(1, matches[0].length - 1);
        }
        if (s.charAt(0) == "-" && s.substring(0, 3) != "---") {
          currentTerm = temp;
        } else if (s.startsWith("	")) {
          this.termDict[currentTerm] = temp;
        }
      });
    }
  }
  async defineTerm(editor, formatting) {
    const selectedText = editor.getSelection();
    this.makeNewFile();
    if (this.defsNote) {
      let defsContent = await this.app.vault.read(this.defsNote);
      const termDef = "- " + this.buildDefinitionStyle(true, formatting.termColour, formatting.termItalics, formatting.termBold) + selectedText.charAt(0).toUpperCase() + selectedText.substring(1) + "</span>";
      const termDefNoSpaces = this.removeSpaces(selectedText);
      const defDef = this.buildDefinitionStyle(false, formatting.defnColour, formatting.defnItalics, formatting.defnBold) + formatting.text + `</span> ^${termDefNoSpaces}`;
      const updatedContent = this.placeTermInOrder(defsContent, termDef, defDef, selectedText);
      this.app.vault.modify(this.defsNote, updatedContent);
      editor.replaceSelection(`[[Definitions#^${termDefNoSpaces}|${selectedText}]]`);
      this.termDict[selectedText] = formatting.text;
      new import_obsidian.Notice("Defined!");
    }
  }
  buildDefinitionStyle(isTerm, colour, italicise, bold) {
    let start;
    if (isTerm) {
      start = `<span class='term' style='color: ${colour}; `;
    } else {
      start = `<span class='definition' style='color: ${colour}; `;
    }
    let end = "'>";
    if (italicise) {
      start += `font-style: italic; `;
    }
    if (bold) {
      start += `font-weight: bold; `;
    }
    return start + end;
  }
  removeSpaces(text) {
    let splitted = text.split(" ");
    let formattedText = "";
    splitted.forEach((v) => {
      if (v != " ") {
        if (!v.charAt(0).match("[A-Z]")) {
          formattedText += v.charAt(0).toUpperCase() + v.substring(1);
        } else {
          formattedText += v;
        }
      }
    });
    return formattedText;
  }
  placeTermInOrder(content, term, defn, termName) {
    const contentList = content.split("\n");
    let updatedContent = "";
    let check = false;
    contentList.forEach((s) => {
      if (s.startsWith("#") && check == false) {
        if (s.charAt(2) == termName.charAt(0).toUpperCase()) {
          check = true;
        }
      } else if (check == true) {
        if (s.startsWith("-") && !s.startsWith("---")) {
          let matches = s.match(this.termRegex);
          if (matches) {
            let temp = matches[0].substring(1, matches[0].length - 1).toLowerCase();
            if (termName.toLowerCase() < temp) {
              updatedContent += `${term}
	${defn}
`;
              check = false;
            }
          }
        } else if (!s.startsWith("	")) {
          updatedContent += `${term}
	${defn}
`;
          check = false;
        }
      }
      updatedContent += s + "\n";
    });
    return updatedContent;
  }
  async removeDefinedTerm(editor, termToclear) {
    if (this.defsNote) {
      let defsContent = await this.app.vault.read(this.defsNote);
      if (defsContent) {
        let updatedContent = "";
        let contentList = defsContent.split("\n");
        let removeDef = false;
        contentList.forEach((s) => {
          if (s.startsWith("-") && !s.startsWith("---")) {
            let matches = s.match(this.termRegex);
            if (matches) {
              let temp = matches[0].substring(1, matches[0].length - 1).toLowerCase();
              if (temp != termToclear.toLowerCase()) {
                updatedContent += s + "\n";
              } else {
                removeDef = true;
              }
            }
          } else {
            if (removeDef == false) {
              updatedContent += s + "\n";
            }
            removeDef = false;
          }
        });
        this.app.vault.modify(this.defsNote, updatedContent);
      }
    }
  }
};
var TMSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian.Setting(containerEl).setName("Terms").setHeading();
    new import_obsidian.Setting(containerEl).setName("Term text colour").setDesc("Change the term's default text colour").addColorPicker((cb) => {
      cb.setValue(this.plugin.settings.term_colour);
      cb.onChange(async (value) => {
        this.plugin.settings.term_colour = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Bold term").setDesc("Set the term to be bold").addToggle((btn) => {
      btn.setValue(this.plugin.settings.term_bold);
      btn.onChange(async (value) => {
        this.plugin.settings.term_bold = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Italicise term").setDesc("Set the term to be italicised").addToggle((btn) => {
      btn.setValue(this.plugin.settings.term_italics);
      btn.onChange(async (value) => {
        this.plugin.settings.term_italics = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Definitions").setHeading();
    new import_obsidian.Setting(containerEl).setName("Definition text colour").setDesc("Change the definition's default text colour").addColorPicker((cb) => {
      cb.setValue(this.plugin.settings.defn_colour);
      cb.onChange(async (value) => {
        this.plugin.settings.defn_colour = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Bold definition").setDesc("Set the definition to be bold").addToggle((btn) => {
      btn.setValue(this.plugin.settings.defn_bold);
      btn.onChange(async (value) => {
        this.plugin.settings.defn_bold = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Italicise definition").setDesc("Set the definition to be italicised").addToggle((btn) => {
      btn.setValue(this.plugin.settings.defn_italics);
      btn.onChange(async (value) => {
        this.plugin.settings.defn_italics = value;
        await this.plugin.saveSettings();
      });
    });
  }
};
var DefinitionPopup = class extends import_obsidian.Modal {
  constructor(app, settings, term, onSubmit) {
    super(app);
    this.formatting = {
      text: "",
      termColour: "",
      defnColour: "",
      termBold: false,
      termItalics: false,
      defnBold: false,
      defnItalics: false
    };
    this.settings = settings;
    this.onSubmit = onSubmit;
    this.termToDefine = term;
    this.formatting.termBold = this.settings.term_bold;
    this.formatting.termItalics = this.settings.term_italics;
    this.formatting.defnBold = this.settings.defn_bold;
    this.formatting.defnItalics = this.settings.defn_italics;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: `Define '${this.termToDefine}'` });
    new import_obsidian.Setting(contentEl).setName("Definition").setDesc("Write the definition for this term here").addText(
      (text) => text.onChange((value) => {
        this.formatting.text = value;
      })
    );
    new import_obsidian.Setting(contentEl).setName("Term colour").setDesc(`Default: ${this.settings.term_colour}`).addColorPicker((cb) => {
      cb.setValue(this.settings.term_colour);
      this.formatting.termColour = this.settings.term_colour;
      cb.onChange((value) => {
        this.formatting.termColour = value;
      });
    });
    new import_obsidian.Setting(contentEl).setName("Definition colour").setDesc(`Default: ${this.settings.defn_colour}`).addColorPicker((cb) => {
      cb.setValue(this.settings.defn_colour);
      this.formatting.defnColour = this.settings.defn_colour;
      cb.onChange((value) => {
        this.formatting.defnColour = value;
      });
    });
    new import_obsidian.Setting(contentEl).addButton(
      (btn) => btn.setButtonText("Create").setCta().onClick(() => {
        this.close();
        this.onSubmit(this.formatting);
      })
    );
  }
  onClose() {
    let { contentEl } = this;
    contentEl.empty();
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBDb2xvckNvbXBvbmVudCwgRWRpdG9yLCBIZXhTdHJpbmcsIE1hcmtkb3duVmlldywgTW9kYWwsIE5vdGljZSwgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBURmlsZSwgVmFsdWVDb21wb25lbnQgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5pbnRlcmZhY2UgVGVybU1hbmFnZXJTZXR0aW5ncyB7XHJcblx0bXlTZXR0aW5nOiBzdHJpbmc7XHJcblx0dGVybV9jb2xvdXI6IEhleFN0cmluZztcclxuXHR0ZXJtX2JvbGQ6IGJvb2xlYW47XHJcblx0dGVybV9pdGFsaWNzOiBib29sZWFuO1xyXG5cdGRlZm5fY29sb3VyOiBIZXhTdHJpbmc7XHJcblx0ZGVmbl9ib2xkOiBib29sZWFuO1xyXG5cdGRlZm5faXRhbGljczogYm9vbGVhbjtcclxufVxyXG5cclxuaW50ZXJmYWNlIGRpY3Rpb25hcnkge1xyXG5cdHRleHQ6IHN0cmluZyxcclxuXHR0ZXJtQ29sb3VyOiBIZXhTdHJpbmcsXHJcblx0ZGVmbkNvbG91cjogSGV4U3RyaW5nLFxyXG5cdHRlcm1Cb2xkOiBib29sZWFuLFxyXG5cdHRlcm1JdGFsaWNzOiBib29sZWFuLFxyXG5cdGRlZm5Cb2xkOiBib29sZWFuLFx0XHJcblx0ZGVmbkl0YWxpY3M6IGJvb2xlYW4sXHJcbn1cclxuXHJcbmludGVyZmFjZSB0ZXJtRGljdGlvbmFyeSB7XHJcblx0W3Rlcm06IHN0cmluZ106IHN0cmluZztcclxufVxyXG5cclxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogVGVybU1hbmFnZXJTZXR0aW5ncyA9IHtcclxuXHRteVNldHRpbmc6ICdkZWZhdWx0JyxcclxuXHR0ZXJtX2NvbG91cjogJyNGRkZGRkYnLFxyXG5cdHRlcm1fYm9sZDogdHJ1ZSxcclxuXHR0ZXJtX2l0YWxpY3M6IGZhbHNlLFxyXG5cdGRlZm5fY29sb3VyOiAnI0ZGRkZGRicsXHJcblx0ZGVmbl9ib2xkOiBmYWxzZSxcclxuXHRkZWZuX2l0YWxpY3M6IGZhbHNlXHJcbn1cclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUZXJtTWFuYWdlciBleHRlbmRzIFBsdWdpbiB7XHJcblx0c2V0dGluZ3M6IFRlcm1NYW5hZ2VyU2V0dGluZ3M7XHJcblx0dGVybURpY3Q6IHRlcm1EaWN0aW9uYXJ5ID0ge307XHJcblx0ZGVmc05vdGU6IFRGaWxlIHwgbnVsbDtcclxuXHRkZWZhdWx0SGVhZGluZ3M6IHN0cmluZyA9IFwiIyBBXFxuLS0tXFxuIyBCXFxuLS0tXFxuIyBDXFxuLS0tXFxuIyBEXFxuLS0tXFxuIyBFXFxuLS0tXFxuIyBGXFxuLS0tXFxuIyBHXFxuLS0tXFxuIyBIXFxuLS0tXFxuIyBJXFxuLS0tXFxuIyBKXFxuLS0tXFxuIyBLXFxuLS0tXFxuIyBMXFxuLS0tXFxuIyBNXFxuLS0tXFxuIyBOXFxuLS0tXFxuIyBPXFxuLS0tXFxuIyBQXFxuLS0tXFxuIyBRXFxuLS0tXFxuIyBSXFxuLS0tXFxuIyBTXFxuLS0tXFxuIyBUXFxuLS0tXFxuIyBVXFxuLS0tXFxuIyBWXFxuLS0tXFxuIyBXXFxuLS0tXFxuIyBYXFxuLS0tXFxuIyBZXFxuLS0tXFxuIyBaXFxuLS0tXFxuXCI7XHJcblx0dGVybVJlZ2V4OiBSZWdFeHAgPSAvPlthLXpBLVpdW2EtekEtWjAtOSBdKjwvO1xyXG5cdGFzeW5jIG9ubG9hZCgpIHtcclxuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcblx0XHRcclxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KCgpID0+IHtcclxuXHRcdFx0dGhpcy5nZXRBbGxUZXJtcygpO1xyXG5cdFx0XHR0aGlzLm1ha2VOZXdGaWxlKCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBUaGlzIGNvbW1hbmQgaXMgdXNlZCB0byBhZGQgYSBuZXcgdGVybSdzIGRlZmluaXRpb25cclxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiAnZGVmaW5lLXRlcm0nLFxyXG5cdFx0XHRuYW1lOiAnRGVmaW5lIFRlcm0nLFxyXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcclxuXHRcdFx0XHRpZiAoZWRpdG9yLmdldFNlbGVjdGlvbigpLm1hdGNoKC9eW2EtekEtWl1bYS16QS1aMC05IF0qJC8pKSB7XHJcblx0XHRcdFx0XHRuZXcgRGVmaW5pdGlvblBvcHVwKHRoaXMuYXBwLCB0aGlzLnNldHRpbmdzLCBlZGl0b3IuZ2V0U2VsZWN0aW9uKCksIChmb3JtYXR0aW5nOiBkaWN0aW9uYXJ5KSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMuZGVmaW5lVGVybShlZGl0b3IsIGZvcm1hdHRpbmcpO1xyXG5cdFx0XHRcdFx0fSkub3BlbigpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRpZiAoIWVkaXRvci5nZXRTZWxlY3Rpb24oKS5jaGFyQXQoMCkubWF0Y2goL15bYS16QS1aXS8pKSB7XHJcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJUZXJtIG11c3Qgc3RhcnQgd2l0aCBhbiBhbHBoYWJldGljYWwgY2hhcmFjdGVyIVwiKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJUZXJtIGNhbiBvbmx5IGNvbnRhaW4gYWxwaGFudW1lcmljIGNoYXJhY3RlcnMhXCIpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0fVxyXG5cdFx0fSlcclxuXHJcblx0XHQvLyBUaGlzIGNvbW1hbmQgaXMgdXNlZCB0byBjbGVhciBhIHRlcm0ncyBkZWZpbml0aW9uXHJcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogJ2NsZWFyLXRlcm0tZGVmaW5pdGlvbicsXHJcblx0XHRcdG5hbWU6ICdDbGVhciBUZXJtIERlZmluaXRpb24nLFxyXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcclxuXHRcdFx0XHQvLyBUaGlzIHJlZ2V4IGNoZWNrcyB0aGF0IHRoZSBzZWxlY3RlZCB0ZXh0IGhhcyBiZWVuIGRlZmluZWQgIFxyXG5cdFx0XHRcdGlmIChlZGl0b3IuZ2V0U2VsZWN0aW9uKCkubWF0Y2goL15cXFtcXFtEZWZpbml0aW9ucyNcXF5bYS16QS1aMC05XSt8W2EtekEtWjAtOV0rXFxdXFxdLykpIHtcclxuXHRcdFx0XHRcdC8vIFRoaXMgcmVnZXggbWF0Y2hlcyB0aGUgdGVybSBwb3J0aW9uIG9mIHRoZSBoeXBlcmxpbmtcclxuXHRcdFx0XHRcdGNvbnN0IG06IFJlZ0V4cE1hdGNoQXJyYXkgfCBudWxsID0gZWRpdG9yLmdldFNlbGVjdGlvbigpLm1hdGNoKC9cXHxbYS16QS1aMC05XSsvKTtcclxuXHRcdFx0XHRcdGlmIChtKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IHRlcm1Ub2NsZWFyID0gbVswXS5zdWJzdHJpbmcoMSk7XHJcblx0XHRcdFx0XHRcdHRoaXMucmVtb3ZlRGVmaW5lZFRlcm0oZWRpdG9yLCB0ZXJtVG9jbGVhcik7XHJcblx0XHRcdFx0XHRcdGRlbGV0ZSB0aGlzLnRlcm1EaWN0W3Rlcm1Ub2NsZWFyXTtcclxuXHRcdFx0XHRcdFx0ZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24odGVybVRvY2xlYXIpO1xyXG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiQ2xlYXJlZCBkZWZpbml0aW9uIVwiKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHR9XHJcblx0XHR9KVxyXG5cclxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgVE1TZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XHJcblx0fVxyXG5cclxuXHRvbnVubG9hZCgpIHtcclxuXHRcdFxyXG5cdH1cclxuXHJcblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XHJcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgbWFrZU5ld0ZpbGUoKSB7XHJcblx0XHQvLyBGZXRjaCB0aGUgZGVmaW5pdGlvbnMgZmlsZVxyXG5cdFx0dGhpcy5kZWZzTm90ZSA9IHRoaXMuYXBwLnZhdWx0LmdldEZpbGVCeVBhdGgoXCJEZWZpbml0aW9ucy5tZFwiKTtcclxuXHRcdFxyXG5cdFx0Ly8gSWYgdGhlIGZpbGUgZG9lc24ndCBleGlzdCwgbWFrZSBpdFxyXG5cdFx0aWYgKCF0aGlzLmRlZnNOb3RlKSB7XHJcblx0XHRcdHRoaXMuZGVmc05vdGUgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoXCJEZWZpbml0aW9ucy5tZFwiLCB0aGlzLmRlZmF1bHRIZWFkaW5ncyk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIElmIHRoZSBmaWxlIGV4aXN0cywgcmVhZCBpdCBhbmQgaWYgaXQncyBlbXB0eSwgYWRkIHRoZSBhbHBoYWJldCBhcyBoZWFkZXJzXHJcblx0XHRpZiAodGhpcy5kZWZzTm90ZSkge1xyXG5cdFx0XHRsZXQgZGVmc0NvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKHRoaXMuZGVmc05vdGUpO1xyXG5cdFx0XHRpZiAoZGVmc0NvbnRlbnQgPT0gXCJcIikge1xyXG5cdFx0XHRcdHRoaXMuYXBwLnZhdWx0Lm1vZGlmeSh0aGlzLmRlZnNOb3RlLCB0aGlzLmRlZmF1bHRIZWFkaW5ncyk7XHJcblx0XHRcdFx0ZGVmc0NvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKHRoaXMuZGVmc05vdGUpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRhc3luYyBnZXRBbGxUZXJtcygpIHtcclxuXHRcdHRoaXMubWFrZU5ld0ZpbGUoKTtcclxuXHRcdFxyXG5cdFx0aWYgKHRoaXMuZGVmc05vdGUpIHtcclxuXHRcdFx0bGV0IGRlZnNDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZCh0aGlzLmRlZnNOb3RlKTtcclxuXHRcdFx0bGV0IGNvbnRlbnRMaXN0ID0gZGVmc0NvbnRlbnQuc3BsaXQoXCJcXG5cIik7XHJcblx0XHRcdGxldCBjdXJyZW50VGVybTogc3RyaW5nID0gXCJcIjtcclxuXHRcdFx0XHJcblx0XHRcdC8vIExvb3AgdGhyb3VnaCB0aGUgcGFnZSdzIGNvbnRlbnQgYW5kIGFkZCBhbGwgdGVybXMgYW5kIHRoZWlyIGRlZmluaXRpb25zIHRvIHRoZSBkaWN0aW9uYXJ5ICd0ZXJtRGljdCdcclxuXHRcdFx0Y29udGVudExpc3QuZm9yRWFjaCgoczogc3RyaW5nKSA9PiB7XHJcblx0XHRcdFx0bGV0IG1hdGNoZXM6IFJlZ0V4cE1hdGNoQXJyYXkgfCBudWxsID0gcy5tYXRjaCh0aGlzLnRlcm1SZWdleCk7XHJcblx0XHRcdFx0bGV0IHRlbXAgPSBcIlwiO1xyXG5cdFx0XHRcdGlmIChtYXRjaGVzKSB7XHJcblx0XHRcdFx0XHR0ZW1wID0gbWF0Y2hlc1swXS5zdWJzdHJpbmcoMSwgbWF0Y2hlc1swXS5sZW5ndGggLSAxKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKHMuY2hhckF0KDApID09IFwiLVwiICYmIHMuc3Vic3RyaW5nKDAsIDMpICE9IFwiLS0tXCIpIHtcclxuXHRcdFx0XHRcdGN1cnJlbnRUZXJtID0gdGVtcDtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKHMuc3RhcnRzV2l0aChcIlxcdFwiKSkge1xyXG5cdFx0XHRcdFx0dGhpcy50ZXJtRGljdFtjdXJyZW50VGVybV0gPSB0ZW1wO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSlcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGFzeW5jIGRlZmluZVRlcm0oZWRpdG9yOiBFZGl0b3IsIGZvcm1hdHRpbmc6IGRpY3Rpb25hcnkpIHtcclxuXHRcdGNvbnN0IHNlbGVjdGVkVGV4dCA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcclxuXHRcdHRoaXMubWFrZU5ld0ZpbGUoKTtcclxuXHJcblx0XHRpZiAodGhpcy5kZWZzTm90ZSkge1xyXG5cclxuXHRcdFx0bGV0IGRlZnNDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZCh0aGlzLmRlZnNOb3RlKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIEJ1aWxkIHRoZSBzdHJpbmcgZm9yIHRoZSB0ZXJtLCB0aGUgZGVmaW5pdGlvbiwgdGhlIHRlcm0gd2l0aG91dCBzcGFjZXMsIGFuZCB0aGUgbmV3IHBhZ2UgY29udGVudFxyXG5cdFx0XHRjb25zdCB0ZXJtRGVmID0gXCItIFwiICsgdGhpcy5idWlsZERlZmluaXRpb25TdHlsZSh0cnVlLCBmb3JtYXR0aW5nLnRlcm1Db2xvdXIsIGZvcm1hdHRpbmcudGVybUl0YWxpY3MsIGZvcm1hdHRpbmcudGVybUJvbGQpICsgc2VsZWN0ZWRUZXh0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc2VsZWN0ZWRUZXh0LnN1YnN0cmluZygxKSArIFwiPC9zcGFuPlwiO1xyXG5cdFx0XHRjb25zdCB0ZXJtRGVmTm9TcGFjZXMgPSB0aGlzLnJlbW92ZVNwYWNlcyhzZWxlY3RlZFRleHQpO1xyXG5cdFx0XHRjb25zdCBkZWZEZWYgPSB0aGlzLmJ1aWxkRGVmaW5pdGlvblN0eWxlKGZhbHNlLCBmb3JtYXR0aW5nLmRlZm5Db2xvdXIsIGZvcm1hdHRpbmcuZGVmbkl0YWxpY3MsIGZvcm1hdHRpbmcuZGVmbkJvbGQpICsgZm9ybWF0dGluZy50ZXh0ICsgXCI8L3NwYW4+XCIgKyBgIF4ke3Rlcm1EZWZOb1NwYWNlc31gO1xyXG5cdFx0XHRjb25zdCB1cGRhdGVkQ29udGVudCA9IHRoaXMucGxhY2VUZXJtSW5PcmRlcihkZWZzQ29udGVudCwgdGVybURlZiwgZGVmRGVmLCBzZWxlY3RlZFRleHQpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gVXBkYXRlIHRoZSBwYWdlIGNvbnRlbnQgYW5kIHJlcGxhY2UgdGhlIHNlbGVjdGVkIHRlcm0gd2l0aCBhIGh5cGVybGluayB0byBpdHMgZGVmaW5pdGlvblxyXG5cdFx0XHR0aGlzLmFwcC52YXVsdC5tb2RpZnkodGhpcy5kZWZzTm90ZSwgdXBkYXRlZENvbnRlbnQpO1xyXG5cdFx0XHRlZGl0b3IucmVwbGFjZVNlbGVjdGlvbihgW1tEZWZpbml0aW9ucyNeJHt0ZXJtRGVmTm9TcGFjZXN9fCR7c2VsZWN0ZWRUZXh0fV1dYCk7XHJcblx0XHRcdHRoaXMudGVybURpY3Rbc2VsZWN0ZWRUZXh0XSA9IGZvcm1hdHRpbmcudGV4dDtcclxuXHJcblx0XHRcdG5ldyBOb3RpY2UoXCJEZWZpbmVkIVwiKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGJ1aWxkRGVmaW5pdGlvblN0eWxlKGlzVGVybTogYm9vbGVhbiwgY29sb3VyOiBIZXhTdHJpbmcsIGl0YWxpY2lzZTogYm9vbGVhbiwgYm9sZDogYm9vbGVhbik6IHN0cmluZyB7XHJcblx0XHQvLyBDb25zdHJ1Y3QgdGhlIGluaXRpYWwgSFRNTCB0YWcgYW5kIHN0eWxlIFxyXG5cdFx0bGV0IHN0YXJ0OiBzdHJpbmc7XHJcblx0XHRpZiAoaXNUZXJtKSB7XHJcblx0XHRcdHN0YXJ0ID0gYDxzcGFuIGNsYXNzPSd0ZXJtJyBzdHlsZT0nY29sb3I6ICR7Y29sb3VyfTsgYDtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHN0YXJ0ID0gYDxzcGFuIGNsYXNzPSdkZWZpbml0aW9uJyBzdHlsZT0nY29sb3I6ICR7Y29sb3VyfTsgYDtcclxuXHRcdH1cclxuXHRcdGxldCBlbmQgPSBcIic+XCJcclxuXHRcdFxyXG5cdFx0aWYgKGl0YWxpY2lzZSkge1xyXG5cdFx0XHRzdGFydCArPSBgZm9udC1zdHlsZTogaXRhbGljOyBgO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChib2xkKSB7XHJcblx0XHRcdHN0YXJ0ICs9IGBmb250LXdlaWdodDogYm9sZDsgYDtcclxuXHRcdH1cclxuXHRcdHJldHVybiBzdGFydCArIGVuZDtcclxuXHJcblx0fVxyXG5cclxuXHRyZW1vdmVTcGFjZXModGV4dDogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRcdGxldCBzcGxpdHRlZCA9IHRleHQuc3BsaXQoXCIgXCIpO1xyXG5cdFx0bGV0IGZvcm1hdHRlZFRleHQgPSBcIlwiO1xyXG5cdFx0Ly8gTG9vcCB0aHJvdWdoIHRoZSB0ZXJtIGFuZCByZW1vdmUgc3BhY2VzXHJcblx0XHRzcGxpdHRlZC5mb3JFYWNoKCh2KSA9PiB7XHJcblx0XHRcdGlmICh2ICE9IFwiIFwiKSB7XHJcblx0XHRcdFx0aWYgKCF2LmNoYXJBdCgwKS5tYXRjaChcIltBLVpdXCIpKSB7XHJcblx0XHRcdFx0XHRmb3JtYXR0ZWRUZXh0ICs9IHYuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB2LnN1YnN0cmluZygxKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Zm9ybWF0dGVkVGV4dCArPSB2O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSlcclxuXHRcdHJldHVybiBmb3JtYXR0ZWRUZXh0O1xyXG5cdH1cclxuXHJcblx0cGxhY2VUZXJtSW5PcmRlcihjb250ZW50OiBzdHJpbmcsIHRlcm06IHN0cmluZywgZGVmbjogc3RyaW5nLCB0ZXJtTmFtZTogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRcdGNvbnN0IGNvbnRlbnRMaXN0OiBBcnJheTxzdHJpbmc+ID0gY29udGVudC5zcGxpdChcIlxcblwiKTtcclxuXHRcdGxldCB1cGRhdGVkQ29udGVudDogc3RyaW5nID0gXCJcIjtcclxuXHRcdGxldCBjaGVjazogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuXHRcdGNvbnRlbnRMaXN0LmZvckVhY2goKHMpID0+IHtcclxuXHRcdFx0Ly8gSWYgdGhlIGxpbmUgaXMgYSBoZWFkaW5nXHJcblx0XHRcdGlmIChzLnN0YXJ0c1dpdGgoXCIjXCIpICYmIGNoZWNrID09IGZhbHNlKSB7XHJcblx0XHRcdFx0Ly8gSWYgdGhlIGhlYWRpbmcgbGV0dGVyIG1hdGNoZXMgdGhlIGZpcnN0IGNoYXJhY3RlciBvZiB0aGUgdGVybVxyXG5cdFx0XHRcdGlmIChzLmNoYXJBdCgyKSA9PSB0ZXJtTmFtZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSkge1xyXG5cdFx0XHRcdFx0Y2hlY2sgPSB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdH0gZWxzZSBpZiAoY2hlY2sgPT0gdHJ1ZSkge1xyXG5cdFx0XHRcdC8vIElmIHRoZSBsaW5lIGlzIGEgdGVybVxyXG5cdFx0XHRcdGlmIChzLnN0YXJ0c1dpdGgoXCItXCIpICYmICFzLnN0YXJ0c1dpdGgoXCItLS1cIikpIHtcclxuXHRcdFx0XHRcdC8vIEV4dHJhY3QgdGhlIHRlcm0gZnJvbSB0aGUgSFRNTFxyXG5cdFx0XHRcdFx0bGV0IG1hdGNoZXM6IFJlZ0V4cE1hdGNoQXJyYXkgfCBudWxsID0gcy5tYXRjaCh0aGlzLnRlcm1SZWdleCk7XHJcblxyXG5cdFx0XHRcdFx0aWYgKG1hdGNoZXMpIHtcclxuXHRcdFx0XHRcdFx0Ly8gQ2hlY2sgdGhhdCB0aGUgbmV3IHRlcm0gYWxwaGFiZXRpY2FsbHkgcHJlY2VkZXMgdGhlIGN1cnJlbnQgbGluZVxyXG5cdFx0XHRcdFx0XHRsZXQgdGVtcCA9IG1hdGNoZXNbMF0uc3Vic3RyaW5nKDEsIG1hdGNoZXNbMF0ubGVuZ3RoIC0gMSkudG9Mb3dlckNhc2UoKTtcclxuXHRcdFx0XHRcdFx0aWYgKHRlcm1OYW1lLnRvTG93ZXJDYXNlKCkgPCB0ZW1wKSB7XHJcblx0XHRcdFx0XHRcdFx0dXBkYXRlZENvbnRlbnQgKz0gYCR7dGVybX1cXG5cXHQke2RlZm59XFxuYDtcclxuXHRcdFx0XHRcdFx0XHRjaGVjayA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdH0gZWxzZSBpZiAoIXMuc3RhcnRzV2l0aChcIlxcdFwiKSl7XHJcblx0XHRcdFx0XHQvLyBPdGhlcndpc2UsIGFkZCB0aGUgbGluZSB0byB0aGUgcGFnZSdzIGNvbnRlbnRcclxuXHRcdFx0XHRcdHVwZGF0ZWRDb250ZW50ICs9IGAke3Rlcm19XFxuXFx0JHtkZWZufVxcbmA7XHJcblx0XHRcdFx0XHRjaGVjayA9IGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHR1cGRhdGVkQ29udGVudCArPSBzICsgXCJcXG5cIjtcclxuXHRcdH0pXHJcblx0XHRyZXR1cm4gdXBkYXRlZENvbnRlbnQ7XHJcblx0fVxyXG5cclxuXHRhc3luYyByZW1vdmVEZWZpbmVkVGVybShlZGl0b3I6IEVkaXRvciwgdGVybVRvY2xlYXI6IHN0cmluZykge1xyXG5cdFx0aWYgKHRoaXMuZGVmc05vdGUpIHtcclxuXHRcdFx0bGV0IGRlZnNDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZCh0aGlzLmRlZnNOb3RlKTtcdFxyXG5cdFx0XHRpZiAoZGVmc0NvbnRlbnQpIHtcclxuXHRcdFx0XHRsZXQgdXBkYXRlZENvbnRlbnQ6IHN0cmluZyA9IFwiXCI7XHJcblx0XHRcdFx0bGV0IGNvbnRlbnRMaXN0ID0gZGVmc0NvbnRlbnQuc3BsaXQoXCJcXG5cIik7XHJcblx0XHRcdFx0bGV0IHJlbW92ZURlZjogYm9vbGVhbiA9IGZhbHNlO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIExvb3AgdGhyb3VnaCBlYWNoIGxpbmUgdG8gZmluZCB0aGUgdGVybSB0byBkZWxldGUgXHJcblx0XHRcdFx0Y29udGVudExpc3QuZm9yRWFjaCgoczogc3RyaW5nKSA9PiB7XHJcblx0XHRcdFx0XHQvLyBJZiB0aGUgbGluZSBpcyBhIGRlZmluZWQgdGVybSAobm90IGEgaGVhZGluZyBub3IgYSBzZXBhcmF0aW5nIGxpbmUpXHJcblx0XHRcdFx0XHRpZiAocy5zdGFydHNXaXRoKFwiLVwiKSAmJiAhcy5zdGFydHNXaXRoKFwiLS0tXCIpKSB7XHJcblx0XHRcdFx0XHRcdC8vIFJlZ2V4IHRvIGZpbHRlciBvdXQgdGhlIEhUTUwgY29udGVudCBmcm9tIHRoZSBzdHJpbmc7XHJcblx0XHRcdFx0XHRcdGxldCBtYXRjaGVzOiBSZWdFeHBNYXRjaEFycmF5IHwgbnVsbCA9IHMubWF0Y2godGhpcy50ZXJtUmVnZXgpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gQ2hlY2sgdGhlIHRlcm1zIG1hdGNoLCB0aGVuIGlnbm9yZSBpdCBhbmQgaXRzIGRlZmluaXRpb24gXHJcblx0XHRcdFx0XHRcdGlmIChtYXRjaGVzKSB7XHJcblx0XHRcdFx0XHRcdFx0bGV0IHRlbXAgPSBtYXRjaGVzWzBdLnN1YnN0cmluZygxLCBtYXRjaGVzWzBdLmxlbmd0aCAtIDEpLnRvTG93ZXJDYXNlKCk7XHJcblx0XHRcdFx0XHRcdFx0aWYgKHRlbXAgIT0gdGVybVRvY2xlYXIudG9Mb3dlckNhc2UoKSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0dXBkYXRlZENvbnRlbnQgKz0gcyArIFwiXFxuXCI7XHJcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdHJlbW92ZURlZiA9IHRydWU7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHQvLyBPdGhlcndpc2UsIGFkZCB0aGUgbGluZSB0byB0aGUgcGFnZSdzIGNvbnRlbnRcclxuXHRcdFx0XHRcdFx0aWYgKHJlbW92ZURlZiA9PSBmYWxzZSkge1xyXG5cdFx0XHRcdFx0XHRcdHVwZGF0ZWRDb250ZW50ICs9IHMgKyBcIlxcblwiO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdHJlbW92ZURlZiA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pXHJcblxyXG5cdFx0XHRcdHRoaXMuYXBwLnZhdWx0Lm1vZGlmeSh0aGlzLmRlZnNOb3RlLCB1cGRhdGVkQ29udGVudCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbmNsYXNzIFRNU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG5cdHBsdWdpbjogVGVybU1hbmFnZXI7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFRlcm1NYW5hZ2VyKSB7XHJcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHR9XHJcblxyXG5cdGRpc3BsYXkoKTogdm9pZCB7XHJcblx0XHRjb25zdCB7Y29udGFpbmVyRWx9ID0gdGhpcztcclxuXHJcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cdFxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoJ1Rlcm1zJykuc2V0SGVhZGluZygpO1xyXG5cdFx0Ly8gU2V0dGluZyB0byBjaGFuZ2UgdGhlIGRlZmF1bHQgY29sb3VyIG9mIHRoZSB0ZXJtXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoXCJUZXJtIHRleHQgY29sb3VyXCIpXHJcblx0XHRcdC5zZXREZXNjKFwiQ2hhbmdlIHRoZSB0ZXJtJ3MgZGVmYXVsdCB0ZXh0IGNvbG91clwiKVxyXG5cdFx0XHQuYWRkQ29sb3JQaWNrZXIoKGNiOiBDb2xvckNvbXBvbmVudCkgPT4ge1xyXG5cdFx0XHRcdGNiLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRlcm1fY29sb3VyKTtcclxuXHRcdFx0XHRjYi5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnRlcm1fY29sb3VyID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHQvLyBTZXR0aW5nIHRvIG1ha2UgdGhlIHRlcm0gYm9sZFxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKFwiQm9sZCB0ZXJtXCIpXHJcblx0XHRcdC5zZXREZXNjKFwiU2V0IHRoZSB0ZXJtIHRvIGJlIGJvbGRcIilcclxuXHRcdFx0LmFkZFRvZ2dsZSgoYnRuKSA9PiB7XHJcblx0XHRcdFx0YnRuLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRlcm1fYm9sZCk7XHJcblx0XHRcdFx0YnRuLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MudGVybV9ib2xkID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHR9KVxyXG5cdFx0XHJcblx0XHQvLyBTZXR0aW5nIHRvIGl0YWxpY2lzZSB0aGUgdGVybVxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKFwiSXRhbGljaXNlIHRlcm1cIilcclxuXHRcdFx0LnNldERlc2MoXCJTZXQgdGhlIHRlcm0gdG8gYmUgaXRhbGljaXNlZFwiKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKChidG4pID0+IHtcclxuXHRcdFx0XHRidG4uc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGVybV9pdGFsaWNzKTtcclxuXHRcdFx0XHRidG4ub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZXJtX2l0YWxpY3MgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdH0pXHJcblxyXG5cdFx0XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZSgnRGVmaW5pdGlvbnMnKS5zZXRIZWFkaW5nKCk7XHJcblx0XHQvLyBTZXR0aW5nIHRvIGNoYW5nZSB0aGUgZGVmYXVsdCBjb2xvdXIgb2YgdGhlIGRlZmluaXRpb25zXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoXCJEZWZpbml0aW9uIHRleHQgY29sb3VyXCIpXHJcblx0XHRcdC5zZXREZXNjKFwiQ2hhbmdlIHRoZSBkZWZpbml0aW9uJ3MgZGVmYXVsdCB0ZXh0IGNvbG91clwiKVxyXG5cdFx0XHQuYWRkQ29sb3JQaWNrZXIoKGNiOiBDb2xvckNvbXBvbmVudCkgPT4ge1xyXG5cdFx0XHRcdGNiLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZm5fY29sb3VyKTtcclxuXHRcdFx0XHRjYi5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZm5fY29sb3VyID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHR9KVxyXG5cclxuXHRcdC8vIFNldHRpbmcgdG8gbWFrZSB0aGUgZGVmaW5pdGlvbiBib2xkXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoXCJCb2xkIGRlZmluaXRpb25cIilcclxuXHRcdFx0LnNldERlc2MoXCJTZXQgdGhlIGRlZmluaXRpb24gdG8gYmUgYm9sZFwiKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKChidG4pID0+IHtcclxuXHRcdFx0XHRidG4uc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmbl9ib2xkKTtcclxuXHRcdFx0XHRidG4ub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZuX2JvbGQgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdH0pXHJcblxyXG5cdFx0Ly8gU2V0dGluZyB0byBpdGFsaWNpc2UgdGhlIGRlZmluaXRpb25cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZShcIkl0YWxpY2lzZSBkZWZpbml0aW9uXCIpXHJcblx0XHRcdC5zZXREZXNjKFwiU2V0IHRoZSBkZWZpbml0aW9uIHRvIGJlIGl0YWxpY2lzZWRcIilcclxuXHRcdFx0LmFkZFRvZ2dsZSgoYnRuKSA9PiB7XHJcblx0XHRcdFx0YnRuLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZm5faXRhbGljcyk7XHJcblx0XHRcdFx0YnRuLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmbl9pdGFsaWNzID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHR9KVxyXG5cclxuXHR9XHJcbn1cclxuXHJcbmNsYXNzIERlZmluaXRpb25Qb3B1cCBleHRlbmRzIE1vZGFsIHtcclxuXHRzZXR0aW5nczogVGVybU1hbmFnZXJTZXR0aW5ncztcclxuXHR0ZXJtVG9EZWZpbmU6IHN0cmluZztcclxuXHRmb3JtYXR0aW5nOiBkaWN0aW9uYXJ5ID0ge1xyXG5cdFx0dGV4dDogXCJcIixcclxuXHRcdHRlcm1Db2xvdXI6IFwiXCIsXHJcblx0XHRkZWZuQ29sb3VyOiBcIlwiLFxyXG5cdFx0dGVybUJvbGQ6IGZhbHNlLFxyXG5cdFx0dGVybUl0YWxpY3M6IGZhbHNlLFxyXG5cdFx0ZGVmbkJvbGQ6IGZhbHNlLFxyXG5cdFx0ZGVmbkl0YWxpY3M6IGZhbHNlXHJcblx0fTtcclxuXHJcblx0b25TdWJtaXQ6IChmb3JtYXR0aW5nOiBkaWN0aW9uYXJ5KSA9PiB2b2lkO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgc2V0dGluZ3M6IFRlcm1NYW5hZ2VyU2V0dGluZ3MsIHRlcm06IHN0cmluZywgb25TdWJtaXQ6IChmb3JtYXR0aW5nOiBkaWN0aW9uYXJ5KSA9PiB2b2lkKSB7XHJcblx0XHRzdXBlcihhcHApO1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG5cdFx0dGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xyXG5cdFx0dGhpcy50ZXJtVG9EZWZpbmUgPSB0ZXJtO1xyXG5cdFx0dGhpcy5mb3JtYXR0aW5nLnRlcm1Cb2xkID0gdGhpcy5zZXR0aW5ncy50ZXJtX2JvbGQ7XHJcblx0XHR0aGlzLmZvcm1hdHRpbmcudGVybUl0YWxpY3MgPSB0aGlzLnNldHRpbmdzLnRlcm1faXRhbGljcztcclxuXHRcdHRoaXMuZm9ybWF0dGluZy5kZWZuQm9sZCA9IHRoaXMuc2V0dGluZ3MuZGVmbl9ib2xkO1xyXG5cdFx0dGhpcy5mb3JtYXR0aW5nLmRlZm5JdGFsaWNzID0gdGhpcy5zZXR0aW5ncy5kZWZuX2l0YWxpY3M7XHJcblx0fVxyXG5cclxuXHRvbk9wZW4oKSB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHJcblx0XHQvLyBUaXRsZSBvZiB0aGUgcG9wdXBcclxuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogYERlZmluZSAnJHt0aGlzLnRlcm1Ub0RlZmluZX0nYCB9KTtcclxuXHJcblx0XHQvLyBBZGRzIGFuIGlucHV0IGJveCB0byB3cml0ZSB0aGUgZGVmaW5pdGlvblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxyXG5cdFx0LnNldE5hbWUoXCJEZWZpbml0aW9uXCIpXHJcblx0XHQuc2V0RGVzYyhcIldyaXRlIHRoZSBkZWZpbml0aW9uIGZvciB0aGlzIHRlcm0gaGVyZVwiKVxyXG5cdFx0LmFkZFRleHQoKHRleHQpID0+XHJcblx0XHRcdHRleHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0dGhpcy5mb3JtYXR0aW5nLnRleHQgPSB2YWx1ZTtcclxuXHRcdFx0fSlcclxuXHRcdCk7XHJcblx0XHRcclxuXHRcdC8vIEFkZHMgYSBjb2xvdXIgcGlja2VyIGZvciB0aGUgdGVybVxyXG5cdFx0Ly8gRGVmYXVsdCBmb3VuZCBpbiB0aGlzLnNldHRpbmdzXHJcblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcblx0XHQuc2V0TmFtZShcIlRlcm0gY29sb3VyXCIpXHJcblx0XHQuc2V0RGVzYyhgRGVmYXVsdDogJHt0aGlzLnNldHRpbmdzLnRlcm1fY29sb3VyfWApXHJcblx0XHQuYWRkQ29sb3JQaWNrZXIoKGNiKSA9PiB7XHJcblx0XHRcdGNiLnNldFZhbHVlKHRoaXMuc2V0dGluZ3MudGVybV9jb2xvdXIpO1xyXG5cdFx0XHR0aGlzLmZvcm1hdHRpbmcudGVybUNvbG91ciA9IHRoaXMuc2V0dGluZ3MudGVybV9jb2xvdXI7XHJcblx0XHRcdGNiLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdHRoaXMuZm9ybWF0dGluZy50ZXJtQ29sb3VyID0gdmFsdWU7XHJcblx0XHRcdH0pXHJcblx0XHR9KVxyXG5cclxuXHRcdC8vIEFkZHMgYSBjb2xvdXIgcGlja2VyIGZvciB0aGUgZGVmaW5pdGlvblxyXG5cdFx0Ly8gRGVmYXVsdCBmb3VuZCBpbiB0aGlzLnNldHRpbmdzXHJcblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcblx0XHQuc2V0TmFtZShcIkRlZmluaXRpb24gY29sb3VyXCIpXHJcblx0XHQuc2V0RGVzYyhgRGVmYXVsdDogJHt0aGlzLnNldHRpbmdzLmRlZm5fY29sb3VyfWApXHJcblx0XHQuYWRkQ29sb3JQaWNrZXIoKGNiKSA9PiB7XHJcblx0XHRcdGNiLnNldFZhbHVlKHRoaXMuc2V0dGluZ3MuZGVmbl9jb2xvdXIpO1xyXG5cdFx0XHR0aGlzLmZvcm1hdHRpbmcuZGVmbkNvbG91ciA9IHRoaXMuc2V0dGluZ3MuZGVmbl9jb2xvdXI7XHJcblx0XHRcdGNiLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdHRoaXMuZm9ybWF0dGluZy5kZWZuQ29sb3VyID0gdmFsdWU7XHJcblx0XHRcdH0pXHJcblx0XHR9KVxyXG5cclxuXHRcdC8vIEFkZHMgYSBzdWJtaXQgYnV0dG9uIHRvIHRoZSBwb3B1cFxyXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxyXG5cdFx0LmFkZEJ1dHRvbigoYnRuKSA9PlxyXG5cdFx0XHRidG5cclxuXHRcdFx0LnNldEJ1dHRvblRleHQoXCJDcmVhdGVcIilcclxuXHRcdFx0LnNldEN0YSgpXHJcblx0XHRcdC5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHRcdFx0dGhpcy5vblN1Ym1pdCh0aGlzLmZvcm1hdHRpbmcpO1xyXG5cdFx0XHR9KVxyXG5cdFx0KVxyXG5cdH1cclxuXHJcblx0b25DbG9zZSgpIHtcclxuXHRcdGxldCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdH1cclxufVxyXG5cclxuLy8gREVQUkVDQVRFRFxyXG5cclxuLy8gbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4vLyAuc2V0TmFtZShcIkVtYm9sZGVuIFRlcm1cIilcclxuLy8gLnNldERlc2MoXCJEZWZhdWx0OiBUcnVlXCIpXHJcbi8vIC5hZGRUb2dnbGUoKGNiKSA9PiB7XHJcbi8vIFx0Y2Iuc2V0VmFsdWUodHJ1ZSk7XHJcbi8vIFx0Y2Iub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcbi8vIFx0XHR0aGlzLmZvcm1hdHRpbmcudGVybUJvbGQgPSB2YWx1ZTtcclxuLy8gXHR9KVxyXG4vLyB9KVxyXG5cclxuLy8gbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4vLyAuc2V0TmFtZShcIkl0YWxpY2lzZSBUZXJtXCIpXHJcbi8vIC5zZXREZXNjKFwiRGVmYXVsdDogRmFsc2VcIilcclxuLy8gLmFkZFRvZ2dsZSgoY2IpID0+IHtcclxuLy8gXHRjYi5zZXRWYWx1ZShmYWxzZSk7XHJcbi8vIFx0Y2Iub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcbi8vIFx0XHR0aGlzLmZvcm1hdHRpbmcudGVybUl0YWxpY3MgPSB2YWx1ZTtcclxuLy8gXHR9KVxyXG4vLyB9KVxyXG5cclxuLy8gbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4vLyAuc2V0TmFtZShcIkVtYm9sZGVuIERlZmluaXRpb25cIilcclxuLy8gLnNldERlc2MoXCJEZWZhdWx0OiBGYWxzZVwiKVxyXG4vLyAuYWRkVG9nZ2xlKChjYikgPT4ge1xyXG4vLyBcdGNiLnNldFZhbHVlKGZhbHNlKTtcclxuLy8gXHRjYi5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuLy8gXHRcdHRoaXMuZm9ybWF0dGluZy5kZWZuQm9sZCA9IHZhbHVlO1xyXG4vLyBcdH0pXHJcbi8vIH0pXHJcblxyXG4vLyBuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcbi8vIC5zZXROYW1lKFwiSXRhbGljaXNlIERlZmluaXRpb25cIilcclxuLy8gLnNldERlc2MoXCJEZWZhdWx0OiBGYWxzZVwiKVxyXG4vLyAuYWRkVG9nZ2xlKChjYikgPT4ge1xyXG4vLyBcdGNiLnNldFZhbHVlKGZhbHNlKTtcclxuLy8gXHRjYi5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuLy8gXHRcdHRoaXMuZm9ybWF0dGluZy5kZWZuSXRhbGljcyA9IHZhbHVlO1xyXG4vLyBcdH0pXHJcbi8vIH0pIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHNCQUE4STtBQTBCOUksSUFBTSxtQkFBd0M7QUFBQSxFQUM3QyxXQUFXO0FBQUEsRUFDWCxhQUFhO0FBQUEsRUFDYixXQUFXO0FBQUEsRUFDWCxjQUFjO0FBQUEsRUFDZCxhQUFhO0FBQUEsRUFDYixXQUFXO0FBQUEsRUFDWCxjQUFjO0FBQ2Y7QUFHQSxJQUFxQixjQUFyQixjQUF5Qyx1QkFBTztBQUFBLEVBQWhEO0FBQUE7QUFFQyxvQkFBMkIsQ0FBQztBQUU1QiwyQkFBMEI7QUFDMUIscUJBQW9CO0FBQUE7QUFBQSxFQUNwQixNQUFNLFNBQVM7QUFDZCxVQUFNLEtBQUssYUFBYTtBQUV4QixTQUFLLElB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
